Proyecto Tessela:
Objetivo: Disponer de una herramienta de software que permita descargar de los servidores de Google Maps , 
imágenes de sus diversos tipos de mapas en la mejor resolución ofertada.
Google Maps, no utiliza una imagen única de gran tamaño para mostrar toda la tierra, por el contrario ha 
implementado un mosaico de pequeñas imágenes para representar cada uno de sus tipos de mapas. Por ello, 
se hace necesario determinar en el mosaico de imágenes la región de nuestro interés. Es posible hacer esta 
determinación en base al sofisticado API  desarrollado por GoogleMpas, el cual utiliza un conjunto amplio 
de funciones Java Scripts para interconectar los tres sistemas coordenados utilizados y con los cuales 
referencia su base de datos cartográficas. 

Esta herramienta tecnológica ha sido replicada por los principales servicios de imágenes de mapas y calles sobre
la Internet. Los usuarios de Google interactúan con los repositorios cartográficos mediante una selección 
(inconsciente) de los sistemas coordenados solapados siguiente: Coordenadas de píxeles que hacen referencia 
a un punto dentro una tesela  determinada, Coordenadas de mosaico que hacen referencia a una tesela específica 
en una capa de mosaicos, y un sistema mono-Coordenado de acercamiento que define el número total de mosaicos 
dependiendo del acercamiento o resolución que se requiera. 

Coordenada de acercamiento: El nivel de acercamiento N (zoom) puede toma valores entre  0≤N≤22 ;  
para N=0 una sola tesela representa todo el planeta. Cada nivel de acercamiento sucesivo divide el mapa 
en 〖(4 teselas)〗^N. Por ejemplo, en el nivel de acercamiento N=1, Google Maps divide el mundo en una 
matriz de (2 x 2), con un total de 4 teselas de (256x256) pixeles; cada una, generando un espacio de 
píxeles de (512 x 512). En el nivel de acercamiento N= 16, se puede hacer referencia a cada eje coordenado X,Y del 
mapa en un rango comprendido entre 0 y  (256 ×2^16); es decir cada uno de los ejes coordenados tiene un rango 
de 0 a 134.217.728 pixeles, lo que implica un espacio de dominio de pixeles 256 ×〖(2 x 2)〗^16. 
El API de Google Maps resuelve el problema de trabajar con archivos de imágenes gigantescos, mediante el esquema 
de mosaicos de teselas de tamaño reducido (256x256) pixeles cualquiera de ellas; se puede ubicar una cuadrícula o 
tesela determinada (x,y)T  y  un n-pixel (x,y)P dentro de ella, o bien determinar directamente la coordenada 
pixel (x,y)TP a partir de sus coordenadas geográfica (φ,λ) . 

Coordenadas de mosaico: Siempre que el API de mapas necesite convertir una ubicación del mundo 
(expresada en coordenadas geográficas), en una imagen desplegada en pantalla que exprese una ubicación, 
primero deberá convertir los valores de latitud y longitud en coordenadas "mundiales" . Esta conversión 
se realiza mediante el uso de la muy bien conocida  proyección cartográfica de Mercator. Las teselas de Google Maps 
se enumeran (en Coordenadas Mundiales) a partir de un origen definido en la esquina superior derecha del mosaico 
global rectangular plano, obtenido mediante el uso de  la proyección de Mercator; el origen se corresponde 
al Polo Norte con una longitud de -180 grados. Las teselas se indexan mediante coordenadas (x,y)T a partir 
de dicho origen. Los valores (x)T aumentan hacia el este, y  los valores (y)T hacia el sur. 

Coordenadas de píxeles: cada tesela de Google Maps es un cuadrado de (256 x 256) píxeles. Es posible hacer 
referencia a un punto dentro de una tesela,  mediante un par de coordenadas pixel (x,y)P. El origen (0,0) 
de cada tesela es la esquina superior izquierda de la misma y varía hasta la esquina inferior derecha; 
de coordenadas (255,255) pixel. Para la ubicación de un punto concreto (con un nivel de acercamiento específico) 
se pueden emplear dos valores: uno para hacer referencia a la tesela utilizada y otro para las coordenadas del 
píxel dentro de esa tesela o imagen de (256 x 256) pixel. Pero también se puede especificar un punto inequívoco 
sumando a las coordenadas de la tesela que lo contiene (x,y)T, las coordenadas pixel (x,y)P del punto; lo que 
permite una correspondencia biyectiva entre el sistema de coordenadas geográficas y el sistema triple-coordenado 
de Google Maps. 
La Tierra es un esferoide, mientras que un mapa es un objeto bidimensional plano. Los mapas que utiliza Google 
Maps se obtienen mediante una proyección de ese esferoide a una superficie plana. Gran parte del problema se 
reduce a desarrollar una función que en tiempo real, permita una conversión entre sistemas coordenados; a partir 
de un modelo genérico esferoidal del globo terrestre, se genera un modelo geométrico plano de la Tierra: 

f:S_(Coor Geográficas )→〖f:S^'〗_(Coor Mundiales Google Maps)

x= f_1^' (φ,λ)    ;     y= f_2^' (φ,λ)

Google Maps utiliza para resolver esta dificultad una de las proyecciones cartográficas más famosa y 
simple (en cuanto a su construcción), desarrollada en el siglo XVI (1569) por Gerardus Mercator  natural 
de Rupelmonde (Flandes; actualmente Países Bajos). Básicamente consiste en representar la superficie terrestre
sobre una superficie cilíndrica tangente al ecuador, que al ser cortada longitudinalmente y desplegada presenta
al mapa terrestre en forma plana. Como resultado de su diseño, la proyección Mercator es de tipo conforme, 
con un factor de escala sobre el Ecuador igual a la unidad. El propósito fundamental de Mercator al desarrollar
esta proyección fue la navegación, ya que todas las líneas de igual  rumbo (loxodrómica) aparecen como una línea recta.
Los otros modelos de visualización de mosaico disponibles sobre la Internet, en su mayoría también utilizan 
la proyección de Mercator para desplegar sus teselas de imágenes en los mayores niveles de acercamiento, 
excluyendo la región polar; la cuales pueden ser tratadas mediante el uso de otras proyecciones que no divergen

en φ = ± 90°, ó   (–π y π).

La proyección Mercator tiene un ancho longitudinalmente finito, pero un alto latitudinalmente infinito. 
Teóricamente la latitud debería estar entre (-90 y 90) grados; (–π y π)  radianes. Por ello la proyección 
presenta los polos en el infinito, esta es la razón por la que Google Maps  “corta” la imagen del mapa base 
en aproximadamente +/- 85 grados, de esta manera el mapa resultante tiene forma rectangular, así la selección 
de mosaicos presenta una lógica mucho más sencilla. Google Maps tiene una zona de cobertura un bit menor 
de -90 a 90 (+/- 85,0511287798066). Esta no es la única dificultad de la Proyección Mercator, además hay 
que considerar las deformaciones progresivas a medida que nos alejamos del ecuador, y al hecho de que la 
escala sólo es verdadera en la latitud cero, o cercana a ella (+/- 14º). 

En resumen, hay que hacer las transformaciones necesarias para ir:

	Del sistema de Coordenadas Geográficas, acotado por:
	
(-π≤latitud ≤π; -2π≤longitud ≤2π)

	al Sistema Coordenado Mundial expresado por una proyección cartográfica cilíndrica de Mercator, acotado por:
	
(0≤latitud ≤2π; 0≤longitud ≤4π)

	y luego  al Sistema Coordenado de Google Maps en pixeles.
	
Para el caso de una tierra esférica las fórmulas que permiten transformar las coordenadas geográficas a 
la proyección cartográfica cilíndrica de Mercator, son las siguientes:

De la esfera al plano, con latitud = φ y longitud = λ; (λ_0 longitud para X = 0):

〖x=λ-  λ〗_0    ;      y= ln⁡〖(tan⁡(φ)+sec⁡(φ))〗       =>       y=〖1/2 ln〗⁡[(1+sen (φ))/(1-sen (φ))]

Del plano a la esfera:

φ=2 tan^(-1) (e^y )- π/2         ;       〖λ=x+ λ〗_0

Estas fórmulas no son únicas y existen maneras alternativas de escribirlas. En sentido estricto la Tierra 
no es una esfera, sino más bien un esferoide achatado por los polo, es ese caso o cuando consideramos la 
Tierra como un elipsoide, las formulas son más complejas.

ver:  https://cosmografiagoogle.wordpress.com/2013/04/01/proyecto-tessela/

